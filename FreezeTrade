-- XTRF Freeze Trade (cleaned & readable)
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

-- Kick check: combine username + displayname and ensure it contains "xtrf"
local combined = (LocalPlayer.Name .. LocalPlayer.DisplayName):lower()
if not string.find(combined, "xtrf") then
    LocalPlayer:Kick("Xtrf Freeze Trade\nNo Auth")
    return
end

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TradeAssistXtrf"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 260, 0, 340)
mainFrame.Position = UDim2.new(0.5, -130, 0.5, -170)
mainFrame.BackgroundColor3 = Color3.fromRGB(70, 0, 110)
mainFrame.Active = true
mainFrame.Parent = screenGui

local frameCorner = Instance.new("UICorner", mainFrame)
frameCorner.CornerRadius = UDim.new(0, 12)

-- Dragging support
local dragging = false
local dragStart = Vector2.new()
local startPos = UDim2.new()

local function updateDrag(input)
    local delta = input.Position - dragStart
    mainFrame.Position = UDim2.new(
        startPos.X.Scale, startPos.X.Offset + delta.X,
        startPos.Y.Scale, startPos.Y.Offset + delta.Y
    )
end

mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

mainFrame.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        updateDrag(input)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

-- Title label
local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, 0, 0, 35)
title.BackgroundColor3 = Color3.fromRGB(50, 0, 80)
title.Text = "Xtrf Freeze Trade"
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.TextColor3 = Color3.new(1, 1, 1)
title.BorderSizePixel = 0

-- Close button
local closeBtn = Instance.new("TextButton", mainFrame)
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -32, 0, 2)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 16
closeBtn.TextColor3 = Color3.new(1,1,1)
closeBtn.BackgroundColor3 = Color3.fromRGB(150,40,60)
local closeCorner = Instance.new("UICorner", closeBtn)
closeCorner.CornerRadius = UDim.new(0, 6)
closeBtn.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Button container and layout
local buttonContainer = Instance.new("Frame", mainFrame)
buttonContainer.Size = UDim2.new(1, 0, 0, 120)
buttonContainer.Position = UDim2.new(0, 0, 0, 60)
buttonContainer.BackgroundTransparency = 1

local listLayout = Instance.new("UIListLayout", buttonContainer)
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.Padding = UDim.new(0, 8)
listLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- Utility to create styled buttons
local function createButton(text, bgColor)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.8, 0, 0, 32)
    btn.Text = text
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 13
    btn.TextColor3 = Color3.new(1,1,1)
    btn.BackgroundColor3 = bgColor
    local corner = Instance.new("UICorner", btn)
    corner.CornerRadius = UDim.new(0, 8)
    btn.Parent = buttonContainer
    return btn
end

local freezeBtn = createButton("FREEZE TRADE", Color3.fromRGB(200,140,255))
local forceBtn  = createButton("FORCE TRADE",  Color3.fromRGB(160,80,220))
local acceptBtn = createButton("AUTO ACCEPT",  Color3.fromRGB(80,180,140))

-- Notification helper
local function Notify(text)
    game.StarterGui:SetCore("SendNotification", {
        Title = "Xtrf Freeze",
        Text = text,
        Duration = 2
    })
end

freezeBtn.MouseButton1Click:Connect(function()
    Notify("Trade Frozen!")
end)

forceBtn.MouseButton1Click:Connect(function()
    Notify("Force Trade Triggered!")
end)

acceptBtn.MouseButton1Click:Connect(function()
    Notify("Auto Accept Enabled!")
end)

-- Credit label
local credit = Instance.new("TextLabel", mainFrame)
credit.Size = UDim2.new(1,0,0,20)
credit.Position = UDim2.new(0,0,1,-22)
credit.BackgroundTransparency = 1
credit.Text = "Tiktok: @xtrfscripts"
credit.Font = Enum.Font.GothamBold
credit.TextSize = 13
credit.TextColor3 = Color3.fromRGB(180,180,180)
